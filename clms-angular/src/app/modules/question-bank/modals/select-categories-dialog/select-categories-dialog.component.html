<div class="flex flex-col p-4">
  <h3 class="text-lg font-bold mb-4">Select Categories</h3>

  <!-- Tree for displaying categories -->
  <p-tree
    class="w-full"
    [value]="categoryTree"
    [selectionMode]=" multiple ? 'multiple' : 'single'"
    [(selection)]="selectedCategories"
    [propagateSelectionDown]="false"
    [propagateSelectionUp]="false"
  ></p-tree>

  <!-- Buttons for confirming or canceling selection -->
  <div class="flex justify-end mt-4 gap-4">
    <ng-container *ngIf="multiple && Array.isArray(selectedCategories); else singleSelect">
      <button
        pButton
        type="button"
        label="{{selectedCategories.length <= 1 ? 'Select Category' : 'Select Categories'}}{{selectedCategories.length > 1 ? ' (' + selectedCategories.length + ')' : ''}}"
        icon="pi pi-check"
        (click)="confirmSelection()"
        [disabled]="selectedCategories.length == 0">
      </button>
    </ng-container>
    <ng-template #singleSelect>
      <button
        pButton
        type="button"
        label="Select Category"
        icon="pi pi-check"
        (click)="confirmSelection()"
        [disabled]="!selectedCategories">
      </button>
    </ng-template>
    <button
      pButton
      type="button"
      label="Cancel"
      icon="pi pi-times"
      (click)="cancel()">
    </button>
  </div>
</div>
